$.fn.preloader=function(a){var a=$.extend({delay:200,preload_parent:"a",check_timer:300,ondone:function(){},oneachload:function(){},fadein:500},a),c=$(this).find("img").css({visibility:"hidden",opacity:0}),d,f=0,b=0,e=[],g=a.delay,i=function(){d=setInterval(function(){if(f>=e.length)clearInterval(d),a.ondone();else for(b=0;b<c.length;b++)c[b].complete==!0&&(e[b]==!1&&(e[b]=!0,a.oneachload(c[b]),f++,g+=a.delay),$(c[b]).css("visibility","visible").delay(g).animate({opacity:1},a.fadein,function(){$(this).parent().removeClass("preloader")}))},
a.check_timer)};c.each(function(){$(this).parent(a.preload_parent).length==0?$(this).wrap("<a class='preloader' />"):$(this).parent().addClass("preloader");e[b++]=!1});var c=$.makeArray(c),h=jQuery("<img />",{id:"loadingicon",src:"/public/img/loading.gif"}).hide().appendTo("body");d=setInterval(function(){h[0].complete==!0&&(clearInterval(d),i(),h.remove())},100)};